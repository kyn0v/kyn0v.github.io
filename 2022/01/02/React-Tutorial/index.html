<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>React Tutorial è§£æ | Kyno's BlogğŸ±â€ğŸ</title><meta name="description"><meta name="generator" content="Kyno's BlogğŸ±â€ğŸ"><meta name="author" content="Kyno Yang"><meta name="keywords" content="NUAAer, WHUTer, FanFouer, Music(Guitar, Keyboard, et al.), Reading, Basketball"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160x160.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/favicon-192x192.png"><meta name="msapplication-TileColor" content="#121315"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png"></head><body itemscope itemtype="https://schema.org/WebPage"><header itemscope itemtype="https://schema.org/WPHeader"><a href="/"><img src="/images/svdb.png" alt="Kyno's BlogğŸ±â€ğŸ" title="Kyno's BlogğŸ±â€ğŸ"></a><h1><a href="/" alt="Kyno's BlogğŸ±â€ğŸ" title="Kyno's BlogğŸ±â€ğŸ" itemprop="headline">Kyno's BlogğŸ±â€ğŸ</a></h1><p itemprop="description">ä¸ªäººåšå®¢</p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/" alt="Home" title="Home" itemprop="url">Home</a></li></ul></nav><div class="space"></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline">React Tutorial è§£æ</h1><span class="post-meta">Published on<time itemprop="datePublished" datetime="2022-01-02T13:24:39.000Z"> æ˜ŸæœŸæ—¥, ä¸€æœˆ 2æ—¥ 2022 at 21:24</time><br>Last updated on<time itemprop="dateModified" datetime="2022-01-02T13:24:39.000Z"> æ˜ŸæœŸæ—¥, ä¸€æœˆ 2æ—¥ 2022 at 21:36</time></span><h1 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h1><p>React æ˜¯ä¸€ä¸ª JS åº“ï¼Œä½¿ç”¨ component æ„æˆ UI ã€‚æ ¹æ®å®˜æ–¹æä¾›çš„æ•™ç¨‹å¯ä»¥å®Œæˆä¸€ä¸ªå°æ¸¸æˆï¼ŒåŒæ—¶æ¢³ç†æ•™ç¨‹çš„å®‰æ’å¯ä»¥æ›´å¥½åœ°ç†è§£å¦‚ä½•ä½¿ç”¨ React ã€‚</p>
<h1 id="æ•´ä½“ç»“æ„"><a href="#æ•´ä½“ç»“æ„" class="headerlink" title="æ•´ä½“ç»“æ„"></a>æ•´ä½“ç»“æ„</h1><h2 id="Square"><a href="#Square" class="headerlink" title="Square"></a>Square</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button className=<span class="string">&quot;square&quot;</span>&gt;</span><br><span class="line">        &#123;<span class="comment">/* TODO */</span>&#125;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Board"><a href="#Board" class="headerlink" title="Board"></a>Board</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Board</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">renderSquare</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Square</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> status = <span class="string">&#x27;Next player: X&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;status&quot;</span>&gt;&#123;status&#125;&lt;/div&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;board-row&quot;</span>&gt;</span><br><span class="line">          &#123;<span class="built_in">this</span>.renderSquare(<span class="number">0</span>)&#125;</span><br><span class="line">	        <span class="comment">/*......*/</span></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">				<span class="comment">/*......*/</span></span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Game"><a href="#Game" class="headerlink" title="Game"></a>Game</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Game</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;game&quot;</span>&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;game-board&quot;</span>&gt;</span><br><span class="line">          &lt;Board /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;game-info&quot;</span>&gt;</span><br><span class="line">          &lt;div&gt;&#123;<span class="comment">/* status */</span>&#125;&lt;/div&gt;</span><br><span class="line">          &lt;ol&gt;&#123;<span class="comment">/* TODO */</span>&#125;&lt;/ol&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="React-DOM"><a href="#React-DOM" class="headerlink" title="React DOM"></a>React DOM</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Game /&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h1 id="åœ¨åº•å±‚çš„-Square-ä¸­å…ˆåšäº›åŸºç¡€å·¥ä½œ"><a href="#åœ¨åº•å±‚çš„-Square-ä¸­å…ˆåšäº›åŸºç¡€å·¥ä½œ" class="headerlink" title="åœ¨åº•å±‚çš„ Square ä¸­å…ˆåšäº›åŸºç¡€å·¥ä½œ"></a>åœ¨åº•å±‚çš„ Square ä¸­å…ˆåšäº›åŸºç¡€å·¥ä½œ</h1><h2 id="props"><a href="#props" class="headerlink" title="props"></a>props</h2><p>æˆ‘ä»¬åœ¨ Board ä¸­å‘ Square ä¼ é€’çš„æ•°æ®ï¼Œä»è€Œæ§åˆ¶ Square åº”è¯¥æ˜¾ç¤ºä»€ä¹ˆã€‚ä»çˆ¶å‘å­ä¼ é€’æ•°æ®ï¼Œå°±éœ€è¦ç”¨åˆ° props ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*çˆ¶*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Board</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">renderSquare</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Square</span> <span class="attr">value</span>=<span class="string">&#123;i&#125;</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*å­*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button className=<span class="string">&quot;square&quot;</span>&gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.props.value&#125;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬çš„ props åä¸º value ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„åç§°ï¼Œä½†æ˜¯æ³¨æ„é¿å…ä½¿ç”¨åˆ°ä¿ç•™å­—ï¼ˆå¦‚ keyï¼‰ã€‚</p>
<h2 id="component-çš„äº¤äº’"><a href="#component-çš„äº¤äº’" class="headerlink" title="component çš„äº¤äº’"></a>component çš„äº¤äº’</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> (</span><br><span class="line">     &lt;button className=<span class="string">&quot;square&quot;</span> onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&#x27;click&#x27;</span>)&#125;&gt;</span><br><span class="line">       &#123;<span class="built_in">this</span>.props.value&#125;</span><br><span class="line">     &lt;/button&gt;</span><br><span class="line">   );</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>å¯¹äºä¼ é€’å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œéœ€è¦æ³¨æ„ä¸å¯ä»¥ç›´æ¥ä¼ é€’å‡½æ•°æœ¬èº«ï¼Œè¿™æ ·ä¼šç›´æ¥è°ƒç”¨å‡½æ•°å¹¶è¿”å›ä¸€ä¸ª undefine ç»™ onClick ã€‚å¸¸ç”¨çš„åšæ³•æ˜¯åœ¨å¤–é¢åŒ…ä¸€å±‚åŒ¿åå‡½æ•°ï¼Œç„¶ååœ¨åŒ¿åå‡½æ•°é‡Œæ‰§è¡ŒçœŸæ­£çš„å‡½æ•°ã€‚</li>
<li>å¦å¤–ï¼Œæˆ‘ä»¬ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼ˆç‰¹æ®Šçš„åŒ¿åå‡½æ•°ï¼‰ï¼Œæ˜¯å› ä¸ºå®ƒä¸ç»‘å®š this ï¼Œèƒ½å¤Ÿæ•è·å…¶ä¸Šä¸‹æ–‡çš„ this ï¼Œå‡å°‘å‡ºç° bug çš„å¯èƒ½ã€‚</li>
</ol>
<h2 id="state"><a href="#state" class="headerlink" title="state"></a>state</h2><p>æˆ‘ä»¬é€šè¿‡ state è®°å½•æ§ä»¶çŠ¶æ€ï¼Œ</p>
<p>åœ¨ Button çš„ onClick å‡½æ•°ä¸­ï¼ŒçŠ¶æ€å€¼è¢« setState() å‡½æ•°æ›´æ–°ä¹‹åï¼Œä¼šé€šçŸ¥ Square é‡æ–°æ¸²æŸ“ç•Œé¢ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      value: <span class="literal">null</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button</span><br><span class="line">        className=<span class="string">&quot;square&quot;</span></span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.setState(&#123;<span class="attr">value</span>: <span class="string">&#x27;X&#x27;</span>&#125;)&#125;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.state.value&#125;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“åœ¨ component è°ƒç”¨ setState å‡½æ•°åï¼ŒReact ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°å­ componentã€‚</p>
<h2 id="å·²å®Œæˆ"><a href="#å·²å®Œæˆ" class="headerlink" title="å·²å®Œæˆ"></a>å·²å®Œæˆ</h2><p>å¯å“åº”ç”¨æˆ·ç‚¹å‡»çš„äº¤äº’ç•Œé¢</p>
<h1 id="åœ¨ä¸­å±‚çš„-Board-è¿›è¡Œæ¸¸æˆè§„åˆ™çš„å®ç°"><a href="#åœ¨ä¸­å±‚çš„-Board-è¿›è¡Œæ¸¸æˆè§„åˆ™çš„å®ç°" class="headerlink" title="åœ¨ä¸­å±‚çš„ Board è¿›è¡Œæ¸¸æˆè§„åˆ™çš„å®ç°"></a>åœ¨ä¸­å±‚çš„ Board è¿›è¡Œæ¸¸æˆè§„åˆ™çš„å®ç°</h1><h2 id="Lift-State-Up"><a href="#Lift-State-Up" class="headerlink" title="Lift State Up"></a>Lift State Up</h2><p>ç›®å‰çš„åº”ç”¨è™½ç„¶åœ¨ Square ä¸­è®°å½•äº† state ï¼Œä½†æ˜¯å®ƒçš„ä½œç”¨ç©ºé—´å¤ªå°ï¼Œå‡­æ­¤æ— æ³•è®°å½•æ¸¸æˆä¸­è¿˜éœ€è¦çš„ä¸¤ä¸ªé‡è¦æ•°æ®ï¼š</p>
<ol>
<li>æ£‹ç›˜å½“å‰çŠ¶æ€ï¼Œç”¨äºåˆ¤æ–­æ¸¸æˆç»ˆæ­¢</li>
<li>å½“å‰è½å­çš„ç”¨æˆ·ï¼Œç”¨äºå®ç°è½®æ¢è½å­</li>
</ol>
<ul>
<li>å¯¹äºç¬¬ä¸€ç‚¹ï¼š<ol>
<li>æˆ‘ä»¬æŠŠæ¯ä¸ª Square ä¸­çš„çŠ¶æ€æå‡å¹¶é›†ä¸­åˆ° Board ä¸­ï¼Œç”¨æ•°ç»„ä¸­ç»Ÿä¸€ç®¡ç†ï¼Œç”¨æ¥è¡¨ç¤ºå½“å‰æ£‹ç›˜çŠ¶æ€ï¼Œå¯ä»¥ä¸º â€˜Xâ€™ , â€˜Oâ€™ æˆ– null ã€‚ <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Board</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      squares: <span class="built_in">Array</span>(<span class="number">9</span>).fill(<span class="literal">null</span>),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">renderSquare</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Square</span> <span class="attr">value</span>=<span class="string">&#123;this.state.squares[i]&#125;</span> /&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">	<span class="comment">/*...*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>åœ¨ç»Ÿä¸€ç®¡ç†çŠ¶æ€æ—¶ï¼Œé™¤äº†åˆå§‹åŒ–èµ‹å€¼ï¼Œè¿˜éœ€è¦èƒ½å¤Ÿä¿®æ”¹å®ƒã€‚å› æ­¤ï¼Œéœ€è¦ä» Board å‘ Square ä¼ å…¥ handleClick(i) å‡½æ•°ï¼Œä¸ æ¯ä¸ª Square å¯¹åº”ã€‚ <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">handleClick</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> squares = <span class="built_in">this</span>.state.squares.slice();</span><br><span class="line">    squares[i] = <span class="string">&#x27;X&#x27;</span>;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;<span class="attr">squares</span>: squares&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">renderSquare</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Square</span><br><span class="line">        value=&#123;<span class="built_in">this</span>.state.squares[i]&#125;</span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.handleClick(i)&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li>å–„åå·¥ä½œï¼Œå› ä¸ºçŠ¶æ€å·²ç»æå‡å‡ºå»äº†ï¼Œå› æ­¤éœ€è¦å¯¹ Square è¿™ä¸ª component è¿›è¡Œä¿®æ”¹: åˆ é™¤ä¸å¿…è¦çš„æ„é€ å‡½æ•° + ä» prop ä¸­è·å– value + ä» prop ä¸­è·å– onClick å‡½æ•°ã€‚ <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button</span><br><span class="line">        className=<span class="string">&quot;square&quot;</span></span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.props.onClick()&#125;</span><br><span class="line">				<span class="comment">/*onClick=&#123;this.props.onClick&#125;*/</span></span><br><span class="line">      &gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.props.value&#125;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>è¿›ä¸€æ­¥ç®€åŒ–ï¼šFunction Components ç›®å‰ï¼Œ Square å®Œå…¨æˆä¸ºä¸€ä¸ª controlled components ï¼Œå› ä¸ºå®ƒä¸ä»…æ¥æ”¶ Board çš„èµ‹å€¼ï¼Œè€Œä¸”åœ¨è‡ªèº«æ”¹å˜æ—¶ï¼ˆå¦‚è¢«ç‚¹å‡»ï¼‰ä¼šé€šçŸ¥ Board ã€‚ç”±äºå®ƒåªå«æœ‰ä¸€ä¸ª render æ–¹æ³•ï¼Œæ²¡æœ‰è‡ªèº«çš„çŠ¶æ€ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Function component ä»£æ›¿ Class component çš„å†™æ³•ï¼Œä½¿ç¨‹åºæ›´åŠ ç®€æ´ï¼šFunction component çš„è¾“å…¥å‚æ•°æ˜¯ props ï¼Œè¿”å›å€¼ä¸ºå¾…æ¸²æŸ“æ§ä»¶ã€‚ <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*Class component*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;button</span><br><span class="line">        className=<span class="string">&quot;square&quot;</span></span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.props.onClick()&#125;</span><br><span class="line">				<span class="comment">/*onClick=&#123;this.props.onClick&#125;*/</span></span><br><span class="line">      &gt;</span><br><span class="line">        &#123;<span class="built_in">this</span>.props.value&#125;</span><br><span class="line">      &lt;/button&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*Function component*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Square</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;button className=<span class="string">&quot;square&quot;</span> onClick=&#123;props.onClick&#125;&gt;</span><br><span class="line">      &#123;props.value&#125;</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li>å¯¹äºç¬¬äºŒç‚¹  éœ€è¦æ·»åŠ ä¸€ä¸ªçŠ¶æ€å€¼ç”¨äºè®°å½•è½®æ¢çŠ¶æ€ ï¼Œå¹¶ä¸”æ¯æ¬¡ç‚¹å‡»ä¹‹åï¼Œè½¬æ¢è¿™ä¸ªçŠ¶æ€ã€‚å®˜ç½‘æ•™ç¨‹ä½¿ç”¨ xIsNext è¿™ä¸ªé€»è¾‘ç”¨äºåˆ¤æ–­è½®æ¢ï¼š  <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Board</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      squares: <span class="built_in">Array</span>(<span class="number">9</span>).fill(<span class="literal">null</span>),</span><br><span class="line">      xIsNext: <span class="literal">true</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="title">handleClick</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> squares = <span class="built_in">this</span>.state.squares.slice();</span><br><span class="line">    squares[i] = <span class="built_in">this</span>.state.xIsNext ? <span class="string">&#x27;X&#x27;</span> : <span class="string">&#x27;O&#x27;</span>;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      squares: squares,</span><br><span class="line">      xIsNext: !<span class="built_in">this</span>.state.xIsNext,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> status = <span class="string">&#x27;Next player: &#x27;</span> + (<span class="built_in">this</span>.state.xIsNext ? <span class="string">&#x27;X&#x27;</span> : <span class="string">&#x27;O&#x27;</span>);</span><br><span class="line">		<span class="comment">/*...*/</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*...*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  æ³¨æ„ï¼šåœ¨ handleClick å‡½æ•°ä¸­ï¼Œå¯¹äº squaresï¼ˆstateï¼‰çš„æ›´æ–°ï¼Œå¹¶éç›´æ¥æ”¹å˜å®ƒçš„å€¼ï¼Œè€Œæ˜¯å…ˆè®¾ç½® squaresï¼ˆtempï¼‰ï¼Œç„¶åå†é€šè¿‡ setState å‡½æ•°æ›´æ–° squares ï¼ˆstateï¼‰ã€‚</li>
</ul>
<h2 id="æ¸¸æˆç»ˆæ­¢é€»è¾‘"><a href="#æ¸¸æˆç»ˆæ­¢é€»è¾‘" class="headerlink" title="æ¸¸æˆç»ˆæ­¢é€»è¾‘"></a>æ¸¸æˆç»ˆæ­¢é€»è¾‘</h2><p>é¦–å…ˆï¼Œæ¸¸æˆç»ˆæ­¢çš„åˆ¤æ–­ä¸€å®šæ˜¯åœ¨ç‚¹å‡»è§¦å‘æ—¶æ‰§è¡Œçš„ï¼Œæœ‰ä¸¤ä¸ªæ¡ä»¶ä¼šé€ æˆæ¸¸æˆç»ˆæ­¢ï¼š</p>
<ol>
<li>æœ‰ç©å®¶è·èƒœï¼šåœ¨æ¯æ¬¡ç‚¹å‡»ä¹‹åï¼Œå°†å½“å‰æ£‹ç›˜çŠ¶æ€ä¸æ‰€æœ‰å¯èƒ½è·èƒœçš„ç»„åˆå¯¹æ¯”ï¼Œå¦‚æœè·èƒœåˆ™è¿”å›å½“å‰ç©å®¶ç¬¦å·ã€‚ <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calculateWinner</span>(<span class="params">squares</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> lines = [</span><br><span class="line">    [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">    [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">    [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">    [<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>],</span><br><span class="line">    [<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>],</span><br><span class="line">    [<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>],</span><br><span class="line">    [<span class="number">0</span>, <span class="number">4</span>, <span class="number">8</span>],</span><br><span class="line">    [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>],</span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; lines.length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> [a, b, c] = lines[i];</span><br><span class="line">    <span class="keyword">if</span> (squares[a] &amp;&amp; squares[a] === squares[b] &amp;&amp; squares[a] === squares[c]) &#123;</span><br><span class="line">      <span class="keyword">return</span> squares[a];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>æ£‹ç›˜ä¸‹æ»¡ï¼šå®˜æ–¹æ–‡æ¡£æ²¡æœ‰ä¸“é—¨è¿›è¡Œåˆ¤æ–­ã€‚å› ä¸ºåœ¨ handleClick å‡½æ•°ä¸­ï¼Œè¿˜è§„å®šäº†åœ¨åŒä¸€ä½ç½®ä¸èƒ½é‡å¤è½å­ï¼Œæ‰€ä»¥æ£‹ç›˜ä¸‹æ»¡æ—¶ï¼Œç”¨æˆ·å¿…ç„¶æ— æ³•è¿›è¡Œå…¶ä»–æ“ä½œã€‚ <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">handleClick</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> squares = <span class="built_in">this</span>.state.squares.slice();</span><br><span class="line">    <span class="keyword">if</span> (calculateWinner(squares) || squares[i]) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    squares[i] = <span class="built_in">this</span>.state.xIsNext ? <span class="string">&#x27;X&#x27;</span> : <span class="string">&#x27;O&#x27;</span>;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      squares: squares,</span><br><span class="line">      xIsNext: !<span class="built_in">this</span>.state.xIsNext,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="å·²å®Œæˆ-1"><a href="#å·²å®Œæˆ-1" class="headerlink" title="å·²å®Œæˆ"></a>å·²å®Œæˆ</h2><p>å¯å“åº”ç”¨æˆ·ç‚¹å‡»çš„äº¤äº’ç•Œé¢ + å¯ä»¥åˆ¤æ–­èµ¢å®¶çš„æ¸¸æˆæœºåˆ¶</p>
<h1 id="åœ¨é«˜å±‚çš„-Game-å®ç°å†å²è®°å½•åŠŸèƒ½"><a href="#åœ¨é«˜å±‚çš„-Game-å®ç°å†å²è®°å½•åŠŸèƒ½" class="headerlink" title="åœ¨é«˜å±‚çš„ Game å®ç°å†å²è®°å½•åŠŸèƒ½"></a>åœ¨é«˜å±‚çš„ Game å®ç°å†å²è®°å½•åŠŸèƒ½</h1><h2 id="Lifting-State-Up-Again"><a href="#Lifting-State-Up-Again" class="headerlink" title="Lifting State Up, Again"></a>Lifting State Up, Again</h2><p>ä¸ºäº†å®ç°å†å²è®°å½•ï¼Œéœ€è¦æŠŠæ£‹ç›˜çŠ¶æ€åœ¨æ›´é«˜ä¸€å±‚çš„ Game é‡Œè¿›è¡Œç®¡ç†ï¼Œé¡ºå¸¦æŠŠ Board çš„å…¶ä»–çŠ¶æ€æˆ–è€…å¤„ç†å‡½æ•°ä¹Ÿä¸€å¹¶ä¸Šæã€‚</p>
<ul>
<li>å¯¹äº Board ï¼ŒçŠ¶æ€ä¸Šæåéœ€è¦è°ƒæ•´ state ä¸º propsï¼š  <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Board</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">renderSquare</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;Square</span><br><span class="line">        value=&#123;<span class="built_in">this</span>.props.squares[i]&#125;</span><br><span class="line">        onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.props.onClick(i)&#125;</span><br><span class="line">      /&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;board-row&quot;</span>&gt;</span><br><span class="line">					<span class="comment">/*...*/</span></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">				<span class="comment">/*...*/</span></span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>å¯¹äº Gameï¼Œåˆ™éœ€è¦å°†æ·»åŠ ä¸€äº›å†…å®¹ï¼š  åœ¨ state ä¸­å¼•å…¥ history æ•°ç»„ï¼Œè®°å½•æ¯æ¬¡è½å­ï¼ˆç‚¹å‡»ï¼‰å‰çš„æ£‹ç›˜çŠ¶æ€ï¼Œå¹¶æŠŠ xIsNext ä¹Ÿæ·»åŠ åˆ° state ä¸­ï¼š  <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Game</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      history: [&#123;</span><br><span class="line">        squares: <span class="built_in">Array</span>(<span class="number">9</span>).fill(<span class="literal">null</span>)</span><br><span class="line">      &#125;],</span><br><span class="line">      xIsNext: <span class="literal">true</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">	<span class="comment">/*...*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  åœ¨ handleClick å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åŸºäºæœ€è¿‘çš„å†å²è®°å½•è¿›è¡Œåˆ¤æ–­ï¼Œæ˜¯å¦å¯ä»¥è½å­ï¼Œå¦‚æœå¯ä»¥è½å­ï¼Œåˆ™å°†è½å­åçš„çŠ¶æ€é™„åŠ åˆ° history ï¼š  <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Game</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">handleClick</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> history = <span class="built_in">this</span>.state.history;</span><br><span class="line">    <span class="keyword">const</span> current = history[history.length - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">const</span> squares = current.squares.slice();</span><br><span class="line">    <span class="keyword">if</span> (calculateWinner(squares) || squares[i]) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    squares[i] = <span class="built_in">this</span>.state.xIsNext ? <span class="string">&#x27;X&#x27;</span> : <span class="string">&#x27;O&#x27;</span>;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      history: history.concat([&#123;</span><br><span class="line">        squares: squares</span><br><span class="line">      &#125;]),</span><br><span class="line">      xIsNext: !<span class="built_in">this</span>.state.xIsNext,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">	<span class="comment">/*...*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  åœ¨ render å‡½æ•°ä¸­ï¼Œå¢åŠ æ˜¾ç¤º game-info çš„é€»è¾‘ã€‚  <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Game</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*...*/</span></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> history = <span class="built_in">this</span>.state.history;</span><br><span class="line">    <span class="keyword">const</span> current = history[history.length - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">const</span> winner = calculateWinner(current.squares);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> status;</span><br><span class="line">    <span class="keyword">if</span> (winner) &#123;</span><br><span class="line">      status = <span class="string">&#x27;Winner: &#x27;</span> + winner;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      status = <span class="string">&#x27;Next player: &#x27;</span> + (<span class="built_in">this</span>.state.xIsNext ? <span class="string">&#x27;X&#x27;</span> : <span class="string">&#x27;O&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">&quot;game&quot;</span>&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;game-board&quot;</span>&gt;</span><br><span class="line">          &lt;Board</span><br><span class="line">            squares=&#123;current.squares&#125;</span><br><span class="line">            onClick=&#123;<span class="function">(<span class="params">i</span>) =&gt;</span> <span class="built_in">this</span>.handleClick(i)&#125;</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div className=<span class="string">&quot;game-info&quot;</span>&gt;</span><br><span class="line">          &lt;div&gt;&#123;status&#125;&lt;/div&gt;</span><br><span class="line">          &lt;ol&gt;&#123;<span class="comment">/* TODO */</span>&#125;&lt;/ol&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  ä½ å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨ history é‡Œåªè®°å½•äº†æ£‹ç›˜çŠ¶æ€ï¼Œè€Œæ²¡æœ‰è®°å½•å½“æ—¶è½å­çš„ç”¨æˆ·æ˜¯è°ã€‚</li>
</ul>
<h2 id="æ˜¾ç¤ºå†å²è½å­è®°å½•"><a href="#æ˜¾ç¤ºå†å²è½å­è®°å½•" class="headerlink" title="æ˜¾ç¤ºå†å²è½å­è®°å½•"></a>æ˜¾ç¤ºå†å²è½å­è®°å½•</h2><p>æˆ‘ä»¬åœ¨ game-info é‡Œæ˜¾ç¤ºå†å²è®°å½•ï¼Œé€šè¿‡ map å‡½æ•°å°† history ä¸­çš„å†å²è®°å½•é€ä¸€ç”Ÿæˆæœ‰åºåˆ—è¡¨<ol >çš„å…ƒç´ <li>ï¼Œå…¶ä¸­åŒ…å«äº†å¯ä»¥ç‚¹å‡»è·³è½¬çš„ button ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Game</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">	    <span class="keyword">const</span> history = <span class="built_in">this</span>.state.history;</span><br><span class="line">			<span class="comment">/*...*/</span></span><br><span class="line">	</span><br><span class="line">	    <span class="keyword">const</span> moves = history.map(<span class="function">(<span class="params">step, move</span>) =&gt;</span> &#123;</span><br><span class="line">	      <span class="keyword">const</span> desc = move ? (<span class="string">&#x27;Go to move #&#x27;</span> + move) : (<span class="string">&#x27;Go to game start&#x27;</span>);</span><br><span class="line">	      <span class="keyword">return</span> (</span><br><span class="line">	        &lt;li&gt;</span><br><span class="line">	          &lt;button onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.jumpTo(move)&#125;&gt;&#123;desc&#125;&lt;/button&gt;</span><br><span class="line">	        &lt;/li&gt;</span><br><span class="line">	      );</span><br><span class="line">	    &#125;);</span><br><span class="line">	</span><br><span class="line">			<span class="comment">/*...*/</span></span><br><span class="line">			</span><br><span class="line">	    <span class="keyword">return</span> (</span><br><span class="line">	      &lt;div className=<span class="string">&quot;game&quot;</span>&gt;</span><br><span class="line">					<span class="comment">/*...*/</span></span><br><span class="line">	        &lt;div className=<span class="string">&quot;game-info&quot;</span>&gt;</span><br><span class="line">	          &lt;div&gt;&#123;status&#125;&lt;/div&gt;</span><br><span class="line">	          &lt;ol&gt;&#123;moves&#125;&lt;/ol&gt;</span><br><span class="line">	        &lt;/div&gt;</span><br><span class="line">	      &lt;/div&gt;</span><br><span class="line">	    );</span><br><span class="line">	  &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>map å‡½æ•°çš„å‚æ•° step å’Œ move å¯ä»¥çœ‹ä½œæ˜¯ value å’Œ index ã€‚</p>
<h2 id="Picking-a-Key"><a href="#Picking-a-Key" class="headerlink" title="Picking a Key"></a>Picking a Key</h2><p>å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œä½ ä¼šå¾—åˆ°ä¸‹åˆ—è­¦å‘Šï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Warning: Each child <span class="keyword">in</span> an array or iterator should have a unique â€œkeyâ€ prop. Check the render method <span class="keyword">of</span> â€œGameâ€.</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯å› ä¸ºå½“ React æ¸²æŸ“åˆ—è¡¨æ—¶ï¼Œå®ƒä¼šå­˜å‚¨æ¯ä¸ªå…ƒç´ çš„ä¿¡æ¯ï¼Œå½“æˆ‘ä»¬æ›´æ–°åˆ—è¡¨æ—¶ï¼ŒReact éœ€è¦æ ¹æ®è¿™ä¸ªæ¥ç¡®å®šå“ªäº›åœ°æ–¹æ”¹å˜äº†ï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿçœ‹åˆ°åˆ—è¡¨å…ƒç´ çš„å¢ã€åˆ ã€é‡æ–°æ’åºã€æ”¹ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦ç»™æ¯ä¸ªåˆ—è¡¨å…ƒç´ ä¸€ä¸ª key ï¼ŒReact é€šè¿‡ç»´æŠ¤å’Œæ›´æ–°è¿™äº› key æ¥å®ç°åˆ—è¡¨çš„æ›´æ–°ã€‚å› æ­¤ï¼Œå½“ä½ æ„å»ºåŠ¨æ€åˆ—è¡¨æ—¶ï¼Œä¸€å®šè¦åˆ†é…é€‚å½“çš„ key ã€‚</p>
<p>åœ¨å®˜ç½‘æ•™ç¨‹ä¸­ï¼Œä½¿ç”¨ move ï¼ˆå³ history çš„ indexï¼‰ä½œä¸º keyï¼Œå®ƒè¡¨ç¤ºæ­¥æ•°åºå·ã€‚è¿™é‡Œèƒ½å¤Ÿå®‰å…¨ä½¿ç”¨ move ä½œä¸º key çš„åŸå› ï¼Œæ˜¯å› ä¸ºè¿™é‡Œçš„åˆ—è¡¨å…ƒç´ ä¸ä¼šé‡æ–°æ’åºã€åˆ é™¤æˆ–è€…åœ¨ä¸­é—´æ’å…¥ï¼Œ å› æ­¤æ­¥æ•°åºå·ä¸æ‰§è¡Œæ­¥éª¤ä¸€ä¸€å¯¹åº”ã€‚å¦å¤–ï¼Œkey æ— éœ€å…¨å±€å”¯ä¸€ï¼Œå®ƒåªéœ€è¦åœ¨åŒä¸€çº§çš„ component ç›´æ¥å”¯ä¸€å³å¯ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Game</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">	<span class="comment">/*...*/</span></span><br><span class="line">	<span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> history = <span class="built_in">this</span>.state.history;</span><br><span class="line">		<span class="comment">/*...*/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> moves = history.map(<span class="function">(<span class="params">step, move</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> desc = move ? (<span class="string">&#x27;Go to move #&#x27;</span> + move) : (<span class="string">&#x27;Go to game start&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">          &lt;button onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.jumpTo(move)&#125;&gt;&#123;desc&#125;&lt;/button&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      );</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">		<span class="comment">/*...*/</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å†å²è®°å½•è·³è½¬åŠŸèƒ½"><a href="#å†å²è®°å½•è·³è½¬åŠŸèƒ½" class="headerlink" title="å†å²è®°å½•è·³è½¬åŠŸèƒ½"></a>å†å²è®°å½•è·³è½¬åŠŸèƒ½</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„äº‹æƒ…å°±æ˜¯ç‚¹å‡»æŒ‰é’®å¯ä»¥è·³è½¬åˆ°å¯¹åº”çš„å†å²è®°å½•ã€‚åˆ†ä¸ºä»¥ä¸‹ä¸¤æ­¥ï¼š</p>
<ol>
<li>å°†ç‚¹å‡»çš„æŒ‰é’®ä¸å¯¹åº”å†å²ç»‘å®š</li>
<li>æ›´æ–°è·³è½¬åçš„çŠ¶æ€</li>
<li>è°ƒæ•´æ¸²æŸ“é€»è¾‘</li>
</ol>
<p>å¯¹äºç¬¬ä¸€ç‚¹ï¼šå°†å†å²è®°å½•çš„åºå·ä¸ç‚¹å‡»è·³è½¬æŒ‰é’®çš„åºå·å¯¹åº”å³å¯ï¼šåœ¨ç»™æ¯ä¸€ä¸ªå†å²è®°å½•æŒ‰é’®æ·»åŠ å¯¹åº”çš„ key (move) ä¹‹åï¼Œæˆ‘ä»¬åœ¨ Game çš„ state ä¸­æ·»åŠ  stepNumber çŠ¶æ€ï¼Œä½¿å¾— move å’Œ stepNumber ä¸¤è€…ç›¸äº’é…åˆï¼šå³ç‚¹å‡»æŸä¸€æ¡å†å²è®°å½•ï¼Œè·³è½¬åˆ°ä¸ä¹‹ key (move) å¯¹åº”çš„ stepNumber å†å²ã€‚</p>
<p>å¯¹äºç¬¬äºŒç‚¹ï¼šæœ‰ä¸¤å¤„çš„çŠ¶æ€éœ€è¦æ›´æ–°ï¼Œ</p>
<ol>
<li>è·³è½¬å‡½æ•°æ‰§è¡Œæ—¶ï¼Œéœ€è¦æ›´æ–° xIsNext çŠ¶æ€</li>
<li>ç‚¹å‡»æ£‹ç›˜å‡½æ•°æ‰§è¡Œæ—¶ï¼Œéœ€è¦æ›´æ–°æ–°å¢çš„ stepNumber çŠ¶æ€</li>
</ol>
<p>åœ¨æ–°å¢çŠ¶æ€ä¹‹åï¼Œç‚¹å‡»æ£‹ç›˜å‡½æ•°å¤„ç†çš„ history ä¹Ÿåº”å¼€å§‹ä½¿ç”¨æœ€è¿‘çš„åŸºäºå½“å‰ä¸Šä¸‹æ–‡çš„å†å²è€Œéå®Œæ•´å†å²ã€‚è¿™æ ·åœ¨æ¯æ¬¡è·³è½¬å†å²ä¹‹åï¼Œæ€»èƒ½åŸºäºå½“å‰çš„çŠ¶æ€é‡æ–°è®°å½•å†å²ã€‚</p>
<p>å¯¹äºç¬¬ä¸‰ç‚¹ï¼š</p>
<p>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹æ¸²æŸ“é€»è¾‘ï¼Œä»æ€»æ˜¯æ¸²æŸ“æœ€æ–°å†å²ï¼Œå˜æ›´ä¸ºæ¸²æŸ“å½“å‰ä¸Šä¸‹æ–‡å¯¹åº”çš„å†å²è®°å½•å³å¯ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Game</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      history: [&#123;</span><br><span class="line">        squares: <span class="built_in">Array</span>(<span class="number">9</span>).fill(<span class="literal">null</span>),</span><br><span class="line">      &#125;],</span><br><span class="line">      stepNumber: <span class="number">0</span>,  <span class="comment">/*æ–°å¢çŠ¶æ€*/</span></span><br><span class="line">      xIsNext: <span class="literal">true</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="title">jumpTo</span>(<span class="params">step</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      stepNumber: step,</span><br><span class="line">			xIsNext: (step % <span class="number">2</span>) === <span class="number">0</span>,  <span class="comment">/*ç¬¬ä¸€å¤„çŠ¶æ€æ›´æ–°*/</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="title">handleClick</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		const history = this.state.history;</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">    <span class="keyword">const</span> history = <span class="built_in">this</span>.state.history.slice(<span class="number">0</span>, <span class="built_in">this</span>.state.stepNumber + <span class="number">1</span>);  <span class="comment">/*ä½¿ç”¨å½“å‰ä¸Šä¸‹æ–‡çš„å†å²*/</span></span><br><span class="line">    <span class="keyword">const</span> current = history[history.length - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">const</span> squares = current.squares.slice();</span><br><span class="line">    <span class="keyword">if</span> (calculateWinner(squares) || squares[i]) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    squares[i] = <span class="built_in">this</span>.state.xIsNext ? <span class="string">&#x27;X&#x27;</span> : <span class="string">&#x27;O&#x27;</span>;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      history: history.concat([&#123;</span><br><span class="line">        squares: squares</span><br><span class="line">      &#125;]),</span><br><span class="line">      stepNumber: history.length,  <span class="comment">/*ç¬¬äºŒå¤„çŠ¶æ€æ›´æ–°*/</span></span><br><span class="line">      xIsNext: !<span class="built_in">this</span>.state.xIsNext,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">	    <span class="keyword">const</span> history = <span class="built_in">this</span>.state.history;</span><br><span class="line">	    <span class="keyword">const</span> current = history[<span class="built_in">this</span>.state.stepNumber];  <span class="comment">/*æ¸²æŸ“å½“å‰ä¸Šä¸‹æ–‡å¯¹åº”çš„å†å²*/</span></span><br><span class="line">	    <span class="keyword">const</span> winner = calculateWinner(current.squares);</span><br><span class="line">			<span class="comment">/*...*/</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼ŒTIc-Toc-Toe åŸºæœ¬å®Œæˆã€‚</p>
<h1 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h1><ol>
<li><p>Display the location for each move in the format (col, row) in the move history list.</p>
</li>
<li><p>Bold the currently selected item in the move list.</p>
</li>
<li><p>Rewrite Board to use two loops to make the squares instead of hardcoding them.</p>
</li>
<li><p>Add a toggle button that lets you sort the moves in either ascending or descending order.</p>
</li>
<li><p>When someone wins, highlight the three squares that caused the win.</p>
</li>
<li><p>When no one wins, display a message about the result being a draw.</p>
</li>
</ol>
</article></main></body></html>